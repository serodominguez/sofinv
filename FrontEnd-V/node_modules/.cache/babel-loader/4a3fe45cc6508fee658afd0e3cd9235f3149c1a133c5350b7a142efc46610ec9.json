{"ast":null,"code":"import \"core-js/modules/web.dom-exception.stack.js\";\nclass ApiService {\n  static async fetchData(url, options = {}) {\n    const token = localStorage.getItem('token');\n    if (!this.isTokenValid(token)) {\n      throw new Error('Token no válido o ha expirado');\n    }\n    options.headers = {\n      ...options.headers,\n      'Authorization': `Bearer ${token}`,\n      'Content-Type': 'application/json'\n    };\n    const response = await fetch(url, options);\n    if (!response.ok) {\n      throw new Error('Error en la llamada a la API');\n    }\n    return response.json();\n  }\n  static isTokenValid(token) {\n    if (!token) return false;\n    const payload = JSON.parse(atob(token.split('.')[1]));\n    const currentTime = Math.floor(Date.now() / 1000);\n    return payload.exp > currentTime;\n  }\n}\nexport default ApiService;","map":{"version":3,"names":["ApiService","fetchData","url","options","token","localStorage","getItem","isTokenValid","Error","headers","response","fetch","ok","json","payload","JSON","parse","atob","split","currentTime","Math","floor","Date","now","exp"],"sources":["C:/Users/Sergio/Desktop/SOFINV/FrontEnd/src/services/apiService.js"],"sourcesContent":["class ApiService {\r\n    static async fetchData(url, options = {}) {\r\n        const token = localStorage.getItem('token');\r\n        if (!this.isTokenValid(token)) {\r\n            throw new Error('Token no válido o ha expirado');\r\n        }\r\n\r\n        options.headers = {\r\n            ...options.headers,\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n        };\r\n\r\n        const response = await fetch(url, options);\r\n\r\n        if (!response.ok) {\r\n            throw new Error('Error en la llamada a la API');\r\n        }\r\n\r\n        return response.json();\r\n    }\r\n\r\n    static isTokenValid(token) {\r\n        if (!token) return false;\r\n\r\n        const payload = JSON.parse(atob(token.split('.')[1]));\r\n        const currentTime = Math.floor(Date.now() / 1000);\r\n\r\n        return payload.exp > currentTime;\r\n    }\r\n}\r\n\r\nexport default ApiService;"],"mappings":";AAAA,MAAMA,UAAU,CAAC;EACb,aAAaC,SAASA,CAACC,GAAG,EAAEC,OAAO,GAAG,CAAC,CAAC,EAAE;IACtC,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAI,CAAC,IAAI,CAACC,YAAY,CAACH,KAAK,CAAC,EAAE;MAC3B,MAAM,IAAII,KAAK,CAAC,+BAA+B,CAAC;IACpD;IAEAL,OAAO,CAACM,OAAO,GAAG;MACd,GAAGN,OAAO,CAACM,OAAO;MAClB,eAAe,EAAE,UAAUL,KAAK,EAAE;MAClC,cAAc,EAAE;IACpB,CAAC;IAED,MAAMM,QAAQ,GAAG,MAAMC,KAAK,CAACT,GAAG,EAAEC,OAAO,CAAC;IAE1C,IAAI,CAACO,QAAQ,CAACE,EAAE,EAAE;MACd,MAAM,IAAIJ,KAAK,CAAC,8BAA8B,CAAC;IACnD;IAEA,OAAOE,QAAQ,CAACG,IAAI,CAAC,CAAC;EAC1B;EAEA,OAAON,YAAYA,CAACH,KAAK,EAAE;IACvB,IAAI,CAACA,KAAK,EAAE,OAAO,KAAK;IAExB,MAAMU,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACb,KAAK,CAACc,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACrD,MAAMC,WAAW,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;IAEjD,OAAOT,OAAO,CAACU,GAAG,GAAGL,WAAW;EACpC;AACJ;AAEA,eAAenB,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}